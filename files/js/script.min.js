window.FOS=window.FOS||{},FOS.item=FOS.item||{},FOS.item.rangeSlider=FOS.item.rangeSlider||{},FOS.item.rangeSlider.init=function(e,t){e.keyboardSupport=!0,e.direction="ltr",e.ticksStepped=!0,e.clickOnTicks=!0,e.tickPercentages=null,e.tickValues=null,t&&"function"==typeof t&&t.call(this,e);const n="fos-rangeslider-change";let r,i=document.getElementById(e.itemName),a=e.type,l=e.handles;const o="number"==a,u=o?null:e.dateFormat,m=o?null:e.displayFormat,s=!o&&e.useDisplayFormat;let c=o?function(){let t,n=e.numberFormat;n?("decimals"in n||(n.decimals=0),"mark"in n||(n.mark="."==n.thousand?",":"."),t=n):t={decimals:0};return t}():null,f=s?{to:function(e){return moment(e).format(m)},from:F}:{to:A,from:F},p=o?wNumb(c):f,d=o?parseFloat(e.minimumValue):e.minimumValue,g=o?parseFloat(e.maximumValue):e.maximumValue,y=o?d:F(e.minimumValue),h=o?g:F(e.maximumValue),k=function(){let t=e.value;1==l?t=o?null!=t?parseFloat(t):y:null!=t?F(t):y:o?(t[0]=null!=t[0]?parseFloat(t[0]):y,t[1]=null!=t[1]?parseFloat(t[1]):h):(t[0]=null!=t[0]?F(t[0]):y,t[1]=null!=t[1]?F(t[1]):h);return t}(),S=[],V=function(){let t={},n=e.step;if("monthly"==n||"yearly"==n){let e,r=moment(y),i=moment(h),a="monthly"==n?"M":"y",l=r.add(1,a),o=[];for(;l.isBefore(i);)o.push(l.toDate().getTime()),l=l.add(1,a);if(l.isAfter(i)){let e=o.pop();if(e)g=new Date(e).toJSON(),h=e;else{let e=l.toDate();g=e.toJSON(),h=e.getTime()}}e=100/(o.length+1),e<100?(o.forEach(((n,r)=>{let i=(o[r+1]||h)-n;t[e*(r+1)+"%"]=[n,i]})),t.min=[y,o[0]-y],t.max=[h]):(t.min=[y,h-y],t.max=[h])}else t.min=y,t.max=h;return t}(),b=Array.isArray(e.tickPercentages)?"positions":Array.isArray(e.tickValues)?"values":"count",w={range:V,keyboardSupport:e.keyboardSupport,margin:e.flipRange?null:e.margin,orientation:e.orientation,step:function(){let t=e.step;if(o)return Number(t);if("monthly"==t||"yearly"==t)return null;{const e=36e5;let n;switch(t){case"daily":n=24*e;break;case"weekly":n=168*e}return n}}(),start:function(){let e;e=1==l?[o?k:F(k)]:o?k.map(Number):k.map(F);return e}(),limit:e.flipRange?null:e.rangeLimit&&"date"!=a&&2==l?parseInt(e.rangeLimit):null,connect:e.connectBar&&1==l?"lower":e.connectBar,direction:e.direction,behaviour:e.flipRange?"unconstrained-tap":"tap-drag",tooltips:e.tooltip?1==l?[p]:[p,p]:null,format:p,pips:!!e.showTicks&&{stepped:e.ticksStepped,density:2,format:p,values:"positions"==b?e.tickPercentages:"values"==b?e.tickValues:e.ticks,mode:b}};if(r=noUiSlider.create(i,w),r.on("set",(t=>{let r=O(),i=!1;if(i=function(e){if(1==l&&k!=e[0])return k=e[0],!0;if(2==l&&(k[0]!=e[0]||k[1]!=e[1]))return k=[...e],!0;return!1}(t=t.map(p.from)),i){let t=O();if(function(t,r){apex.event.trigger(`#${e.itemName}`,n,{oldValue:t,newValue:r})}(r,t),S.length){let e,n,r=S[0],i=S[1];r&&(e=r.getValue(),n=1==l?t:t[0],e!=String(n)&&r.setValue(n)),i&&(e=i.getValue(),n=t[1],e!=String(n)&&i.setValue(n))}}})),e.connectBar&&(i.querySelector(".noUi-connect").style.background=e.rangeColor),e.showTicks&&e.clickOnTicks){let t=i.querySelector(".noUi-pips"),n=h-y;t.addEventListener("click",(r=>{let i,a=t.getBoundingClientRect(),l=r.target.dataset.value;if(null!=l)x(l);else{if("horizontal"==e.orientation){let e=a.left,t=a.width;i=Math.min(t,Math.max(0,r.clientX-e))/t}else{let e=a.top,t=a.height;i=Math.min(t,Math.max(0,r.clientY-e))/t}x(y+i*n)}}))}if(e.retItems){let t=e.retItems.split(",");t.length>l&&(t.length=l);for(let e=0;e<t.length;e++)v(t[e],e)}function F(e){let t;if("string"==typeof e){if(e==Number(e))return Number(e);e=function(e){var t;function n(e,n){return(t=moment(e,n)).isValid()}if(n(e,moment.ISO_8601)||n(e,u)||n(e,m))return t.toDate();return apex.debug.error("Range Slider Error: Cannot parse date!!"),t.toDate()}(e)}return t=new Date(e).getTime(),isNaN(t)?y:t}function A(e){return moment(e).format(u)}function N(e){if("number"==typeof e)return p.to(e);if(e instanceof Date)return F(e);if("string"==typeof e){let t=e.split(":");return t=t.map((e=>{let t=Number(e);return t==e?p.to(t):e})),1==t.length?t[0]:t}}function x(e){r.set(N(e))}function O(){if(o){let e=wNumb({decimals:c.decimals,mark:c.mark});return Array.isArray(k)?k.map(e.to):e.to(k)}return Array.isArray(k)?k.map(A):A(k)}function v(e,t){let n=apex.item(e),i=O();function a(){let e=n.getValue(),i=O();i=1==l?i:i[t];let a=o?p.from(e):F(e);if(a>h)n.setValue(o?h:p.to(g));else if(a<y)n.setValue(o?y:p.to(d));else if(e!=String(i)){let n=N(e);t?r.set([null,n]):r.set([n,null])}}S[t]=n,""!=n.getValue()?a():n.setValue(Array.isArray(i)?i[Math.min(t,i.length-1)]:i),$(n.node).on("change",a)}apex.item.create(e.itemName,{setValue:x,getValue:function(){let e=O();return Array.isArray(e)?e.join(":"):e},getRawValue:function(){return k},disable(){i.setAttribute("disabled",!0)},enable(){i.removeAttribute("disabled")},getSliderCmp:()=>r})};
//# sourceMappingURL=script.js.map

